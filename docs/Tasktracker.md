## Задача: План и трекинг реализации Ansible-плейбука Kubernetes на RedOS
- **Статус**: В процессе
- **Описание**: Отслеживание прогресса по этапам реализации, контроль приоритетов и зависимостей по архитектуре из Project.md.

# Tasktracker.md

## Текущий статус проекта
- Общий статус: **В процессе**
- Текущий этап: **Сбор входных данных и фиксация архитектуры**
- Следующий этап: **Формирование inventory и baseline переменных**

## Бэклог и прогресс

| ID | Раздел | Задача | Приоритет | Статус |
|---|---|---|---|---|
| T-001 | Архитектура | Подготовить и согласовать `docs/Project.md` | Критический | Завершена |
| T-002 | Аналитика | Собрать недостающие входные данные (сеть, прокси, DNS/NTP, vCenter, версии) | Критический | В процессе |
| T-003 | Инвентори | Подготовить `inventories/prod/hosts.yml` с группами `control_plane`, `workers`, `metallb`, `nfs` | Критический | Не начата |
| T-004 | Переменные | Сформировать `group_vars` для прокси, сети, k8s, MetalLB, NFS | Критический | Не начата |
| T-005 | Базовая ОС | Реализовать роль `base_os` для RedOS 8.0.2 | Высокий | Не начата |
| T-006 | Прокси | Реализовать роль `proxy` (dnf/systemd/runtime) | Критический | Не начата |
| T-007 | Runtime | Реализовать роль `container_runtime` (containerd/CRI-O) | Критический | Не начата |
| T-008 | Kubernetes | Реализовать роль `kubernetes_core` (init/join/control-plane/worker) | Критический | Не начата |
| T-009 | CNI | Внедрить сетевой плагин и базовые политики | Высокий | Не начата |
| T-010 | MetalLB | Развернуть MetalLB и адресные пулы | Критический | Не начата |
| T-011 | NFS | Настроить NFS и StorageClass/PV/PVC | Критический | Не начата |
| T-012 | Безопасность | Настроить firewalld и SELinux правила | Критический | Не начата |
| T-013 | Идемпотентность | Проверить повторный прогон без нежелательных изменений | Высокий | Не начата |
| T-014 | Качество | Настроить `ansible-lint`, `yamllint`, pre-commit | Средний | Не начата |
| T-015 | Валидация | Добавить smoke-тесты и post-checks | Высокий | Не начата |
| T-016 | Документация | Поддерживать `Project.md`, `Tasktracker.md`, `Diary.md`, `changelog.md` в актуальном состоянии | Высокий | В процессе |

## Декомпозиция ближайшего этапа (сбор данных)
- [ ] Утвердить схему IP-адресов и VLAN/подсетей.
- [ ] Утвердить параметры прокси (`http_proxy`, `https_proxy`, `no_proxy`).
- [ ] Утвердить источник пакетов/образов (локальные mirror/registry или внешние через proxy).
- [ ] Утвердить версию Kubernetes и runtime.
- [ ] Утвердить диапазоны IP для MetalLB.
- [ ] Утвердить параметры NFS (экспорты, путь, права, производительность, backup).

## Риски и контроль
- Риск: недоопределенный `no_proxy` может сломать кластерные коммуникации.
  - Контроль: отдельная валидация на всех нодах до bootstrap.
- Риск: конфликт firewalld/SELinux политик с CNI/MetalLB/NFS.
  - Контроль: таблица портов и контекстов + автоматические post-checks.
- Риск: нестабильный источник образов в изолированной сети.
  - Контроль: fallback на локальный registry mirror.
